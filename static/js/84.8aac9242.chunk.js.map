{"version":3,"file":"static/js/84.8aac9242.chunk.js","mappings":"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","sources":["shared/lib/classNames/classNames.tsx","webpack://cityticket/./src/shared/ui/Button/Button.module.scss?cbd2","shared/ui/Button/Button.tsx","webpack://cityticket/./src/features/Map/Map.module.scss?2cc5","features/Map/Map.tsx","webpack://cityticket/./src/features/MapDrag/MapDrag.module.scss?976f","features/MapDrag/MapDrag.tsx","features/MapLoader/MapLoader.tsx","webpack://cityticket/./src/shared/ui/PageWrapper/PageWrapper.module.scss?a094","shared/ui/PageWrapper/PageWrapper.tsx","pages/MainPage/ui/MainPage/MainPage.tsx"],"sourcesContent":["export type Mods = Record<string, boolean | string | undefined>\n\nexport function classNames(\n    cls: string,\n    mods: Mods = {},\n    additional: Array<string | undefined> = [],\n): string {\n    return [\n        cls,\n        ...additional.filter(Boolean),\n        ...Object.entries(mods)\n            .filter(([_, value]) => Boolean(value))\n            .map(([className]) => className),\n    ]\n        .join(' ');\n}\n\n\n","// extracted by mini-css-extract-plugin\nexport default {\"Button\":\"Button_Button__KZLLT\"};","import {ButtonHTMLAttributes, memo, ReactNode} from 'react';\nimport {classNames, Mods} from \"shared/lib/classNames/classNames\";\nimport cls from \"./Button.module.scss\"\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n    className?: string\n    children?: ReactNode\n}\n\n\nexport const Button = memo((props: ButtonProps) => {\n    const {\n        className,\n        children,\n        ...otherProps\n    } = props\n    \n    const mods: Mods = {\n        \n    };\n    \n    return (\n        <button\n            className={classNames(cls.Button, mods, [className])}\n            {...otherProps}\n        >\n            {children}\n        </button>\n    );\n});","// extracted by mini-css-extract-plugin\nexport default {\"Map\":\"Map_Map__CK0pD\",\"buttonGroup\":\"Map_buttonGroup__soHkt\",\"red\":\"Map_red__8xZLW\"};","import {attributesSvgType} from 'entity/Map';\nimport {memo, ReactNode, ReactSVGElement, useEffect, useRef, useState} from 'react';\nimport {classNames, Mods} from \"shared/lib/classNames/classNames\";\nimport {ReactSVG} from 'react-svg';\nimport {Button} from \"shared/ui/Button/Button\";\nimport cls from \"./Map.module.scss\"\nimport {Simulate} from \"react-dom/test-utils\";\nimport click = Simulate.click;\n\n\ninterface MapProps {\n    className?: string\n    children?: ReactNode\n    apiSvg: string\n}\n\n\nexport const Map = memo((props: MapProps) => {\n    const [scale, setScale] = useState(0.41);\n    const [listId, setListId] = useState<string[]>(['parter_1_1', 'parter_2_1', 'parter_3_1', 'parter_4_1', 'parter_5_1', 'parter_8_1', 'parter_9_1', 'parter_10_1', 'parter_11_12', 'beltaj_right_4_8'])\n    const svgRef = useRef(null)\n\n\n    const handleElementClick = (event: any) => {\n        const clickedElement = event.target;\n        // if (listId.includes(clickedElement.id)) {\n        //     setListId(prevListId => prevListId.filter(id => id !== clickedElement.id));\n        // } else {\n        //     setListId([...listId, clickedElement.id])\n        // }\n\n        console.log(listId)\n        // Применить цвет или другие стили, используя новые координаты и размеры\n        if (clickedElement.style.fill === \"red\") {\n            clickedElement.style.fill = \"\";\n        } else {\n            clickedElement.style.fill = \"red\";\n        }\n\n        // Применить другие стили, используя новые координаты и размеры\n\n        // setSeatList(prevList => [...prevList, 'новое значение']);\n    };\n\n    const handleZoomIn = () => {\n        setScale(scale => scale * 1.2);\n    };\n\n    const handleZoomOut = () => {\n        setScale(scale => scale * 0.8);\n    };\n    const update = () => {\n        listId.map((itemId) => {\n            const click = document.getElementById(itemId)\n            if (click) {\n                click.classList.add('red')\n                click.setAttribute('style', 'fill: red'); // Установка цвета напрямую через атрибут fill\n                click.style.fill = \"red\"; // Обновление стиля для немедленного отображения изменений\n            }\n            // if (elementSvg) {\n            //     elementSvg.setAttribute('fill', 'red');\n            //     // console.log(elementSvg)\n            //     // Здесь вы можете выполнить нужные действия с найденным элементом SVG\n            // }\n        })\n    };\n\n\n    const handletest = () => {\n        console.log(\"функция сработала\")\n        listId.map((itemId) => {\n            const click = document.getElementById(itemId)\n            if (click) {\n                click.classList.add('red')\n                click.setAttribute('style', 'fill: red'); // Установка цвета напрямую через атрибут fill\n                click.style.fill = \"red\"; // Обновление стиля для немедленного отображения изменений\n            }\n        });\n    }\n    useEffect(() => {\n        handletest(); // Вызов функции handletest при монтировании компонента\n    }, []);\n    const {\n        className,\n        children,\n        apiSvg,\n        ...otherProps\n    } = props\n\n    const mods: Mods = {};\n\n    return (\n        <div\n            className={classNames(\"\", mods, [className])}\n            {...otherProps}\n        >\n            <ReactSVG\n                className={cls.Map}\n                src={apiSvg}\n                style={{transform: `scale(${scale})`, transformOrigin: 'left top'}}\n                onClick={handleElementClick}\n                ref={svgRef}\n            />\n            <div className={cls.buttonGroup}>\n                <Button onClick={handleZoomIn}>+</Button>\n                <Button onClick={handleZoomOut}>-</Button>\n                <Button onClick={handletest}>TEST</Button>\n            </div>\n\n        </div>\n    );\n});","// extracted by mini-css-extract-plugin\nexport default {\"MapDrag\":\"MapDrag_MapDrag__mO9eW\"};","import { memo, ReactNode, MouseEvent, useRef } from 'react';\nimport { classNames, Mods } from 'shared/lib/classNames/classNames';\nimport cls from './MapDrag.module.scss';\n\ninterface MapDragProps {\n  className?: string;\n  children?: ReactNode;\n}\n\nexport const MapDrag = memo((props: MapDragProps) => {\n  const svgRef = useRef<HTMLDivElement>(null);\n\n  let isDragging = false;\n  let offset = { x: 0, y: 0 };\n\n  const handleMouseDown = (e: MouseEvent) => {\n    isDragging = true;\n    const element = svgRef.current;\n\n    if (element) {\n      offset.x = element.offsetLeft - e.clientX;\n      offset.y = element.offsetTop - e.clientY;\n    }\n  };\n\n  const handleMouseUp = () => {\n    isDragging = false;\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (isDragging) {\n      const element = svgRef.current;\n      if (element) {\n        element.style.left = `${e.clientX + offset.x}px`;\n        element.style.top = `${e.clientY + offset.y}px`;\n      }\n    }\n  };\n\n  const { className, children, ...otherProps } = props;\n\n  const mods: Mods = {};\n\n  return (\n    <div\n      className={classNames(cls.MapDrag, mods, [className])}\n      {...otherProps}\n      onMouseDown={handleMouseDown}\n      onMouseUp={handleMouseUp}\n      onMouseMove={handleMouseMove}\n      ref={svgRef}\n    >\n      {children}\n    </div>\n  );\n});\n","import React, {memo, ReactNode, useEffect, useState} from 'react';\nimport {classNames, Mods} from \"shared/lib/classNames/classNames\";\nimport axios from \"axios\";\nimport {Map} from \"../Map/Map\";\nimport {mapData} from \"entity/MapLoader\";\nimport {MapDrag} from \"../MapDrag/MapDrag\";\nimport svg from \"./converted.svg\"\n\n\ninterface MapLoaderProps {\n    className?: string\n    children?: ReactNode\n}\n\n\nexport const MapLoader = memo((props: MapLoaderProps) => {\n    const {parse, stringify} = require('svgson');\n    const svgson = require('svgson');\n\n    const [svgData, setSvgData] = useState<mapData>();\n\n    // useEffect(() => {\n    //     // Эмуляция запроса к API для получения SVG-схемы\n    //     axios.get('http://tsnext.ru/test/frontend/resources/dkl-tsn.svg')\n    //         .then(async (response) => {\n    //             // Установка загруженной SVG-схемы в состояние\n    //             setSvgData(response.data);\n    //\n    //             // Преобразование SVG в объект JSON\n    //             const json = await parse(response.data);\n    //             // const foundObject = json.children.find((item: any) => item.name === \"g\");\n    //             // console.log(json)\n    //             setSvgData(json)\n    //         })\n    //         .catch(error => {\n    //             console.error('Ошибка загрузки SVG-схемы:', error);\n    //         });\n    // }, []);\n\n    const {\n        className,\n        children,\n        ...otherProps\n    } = props\n\n    const mods: Mods = {};\n\n    return (\n        <div\n            className={classNames('', mods, [className])}\n            {...otherProps}\n        >\n            <MapDrag>\n                <Map apiSvg={'https://ci41159.tw1.ru/static/converted.svg'}/>\n            </MapDrag>\n\n        </div>\n    );\n});","// extracted by mini-css-extract-plugin\nexport default {\"PageWrapper\":\"PageWrapper_PageWrapper__wXBzN\"};","import {memo, ReactNode} from 'react';\nimport {classNames, Mods} from \"shared/lib/classNames/classNames\";\nimport cls from \"./PageWrapper.module.scss\"\n\ninterface PageWrapperProps {\n    className?: string\n    children?: ReactNode\n}\n\n\nexport const PageWrapper = memo((props: PageWrapperProps) => {\n    const {\n        className,\n        children,\n        ...otherProps\n    } = props\n\n    const mods: Mods = {\n\n    };\n\n    return (\n        <div\n            className={classNames(cls.PageWrapper, mods, [className])}\n            {...otherProps}\n        >\n            {children}\n        </div>\n    );\n});","import {memo, ReactNode} from 'react';\nimport {classNames, Mods} from \"shared/lib/classNames/classNames\";\nimport {MapLoader} from \"../../../../features/MapLoader/MapLoader\";\nimport {PageWrapper} from \"../../../../shared/ui/PageWrapper/PageWrapper\";\n\ninterface MainPageProps {\n    className?: string\n    children?: ReactNode\n}\n\n\nconst MainPage = memo((props: MainPageProps) => {\n    const {\n        className,\n        children,\n        ...otherProps\n    } = props\n\n    const mods: Mods = {};\n\n    return (\n        <PageWrapper>\n            <div\n                className={classNames('', mods, [className])}\n                {...otherProps}\n            >\n                {children}\n                <MapLoader/>\n            </div>\n        </PageWrapper>\n    );\n});\nexport default MainPage"],"names":["classNames","cls","mods","arguments","length","undefined","filter","Boolean","Object","entries","_ref","_","value","map","_ref2","className","join","Button","memo","props","children","otherProps","_jsx","Simulate","click","Map","scale","setScale","useState","listId","setListId","svgRef","useRef","handletest","console","log","itemId","document","getElementById","classList","add","setAttribute","style","fill","useEffect","apiSvg","_jsxs","ReactSVG","src","transform","concat","transformOrigin","onClick","event","clickedElement","target","ref","handleZoomIn","handleZoomOut","MapDrag","isDragging","offset","x","y","onMouseDown","e","element","current","offsetLeft","clientX","offsetTop","clientY","onMouseUp","handleMouseUp","onMouseMove","left","top","MapLoader","parse","stringify","require","svgData","setSvgData","PageWrapper"],"sourceRoot":""}